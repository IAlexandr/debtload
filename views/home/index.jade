doctype html
html(lang="en",ng-app="main")
    head
        link(rel="stylesheet", href='//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css')
        link(rel="stylesheet", href='/styles/style.css')
        script(type="text/javascript", src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js")
        script(type="text/javascript", src="http://malsup.github.com/jquery.form.js")
        script(type="text/javascript", src="/js/socket.io.js")
        script(type="text/javascript", src="/js/sails.io.js")
        script(type="text/javascript", src="js/app.js")

        script(type="text/javascript", src="js/main.js")
        script(type="text/javascript", src="js/uploadFile.js")

        title Обновление данных
    body(class="container")
        div(class="page-header")
            h2 Обновление задолженности в слое рекламные конструкции
        ol(class="breadcrumb")
            li(id="uploadFile", class="active") 1. Загрузка файла
            li(id="fileLoaded") 2. Файл загружен
            li(id="prepReport") 3. Предварительный отчет
            li(id="dataStartUpdate") 4. Обновление данных
            li(id="dataUpdated") 5. Данные обновлены
            li(id="updateReport") 6. Отчет
        //1. id="uploadFilePanel"
        div(class="panel panel-default paneHide", id="uploadFilePanel")
            div(class="panel-heading") Загрузка файла
            div(class="panel-body")
                form(action="debt/prepare", method="post", id="form", name="form", enctype="multipart/form-data")
                    div(class="input-group")
                        span(class="input-group-addon", style="width: 150px;") Файл с новыми данными о задолженности (в формате *.xls)
                        input(class="form-control", type="file",id="file", name="file", accept="application/vnd.ms-excel")
                        div(class="input-group-btn")
                            button(class="btn btn-default", type="submit") Загрузить
                            img(src="images/ajax-loader.gif", id="loading-img", style="display:none;", alt="Please Wait")
                    div(id="progressbox")
                        div(id="progressbar")
                        div(id="statustxt") 0%
                    div(id="output")
        //3. id="prepReportPanel"
        div(class="panel panel-default paneHide", id="prepReportPanel")
            div(class="panel-heading")
                div(style="float:left; line-height:32px;") Предварительный отчет
                button(class="btn btn-primary", style="float:right; display:block;",  type="button", onclick="updateDebts()") Обновить задолженность в слое
                div(class="clear")
            div(class="panel-body")
                ul(class="list-group")
                    li(class="list-group-item list-group-item-info")
                        span Искали каждую рекламную конструкцию (объект слоя РК) в списке долгов (в файле xls)
                    li(class="list-group-item")
                        span Общее кол-во рекламных конструкций в слое
                        span(class="badge")
                            span(id="FsTotalQuantity")
                    li(class="list-group-item")
                        span Найдено
                        span(class="badge")
                            span(id="FsUpdateQuantity")
                    li(class="list-group-item")
                        span Не найдено
                        span(class="badge")
                            span(id="FsMissQuantity")
                    li(class="list-group-item")
                        span Список ненайденных рекламных конструкций (СНР. объекта аренды):
                        div(id="FsMissObjList")
                ul(class="list-group")
                    li(class="list-group-item list-group-item-info")
                        span Искали каждый долг (из файла xls) в списке рекламных конструкций (в слое РК)
                    li(class="list-group-item")
                        span Общее кол-во долгов
                        span(class="badge")
                            span(id="DebtsTotalQuantity")
                    li(class="list-group-item")
                        span Найдено
                        span(class="badge")
                            span(id="DebtsUpdateQuantity")
                    li(class="list-group-item")
                        span Не найдено
                        span(class="badge")
                            span(id="DebtsMissQuantity")
                    li(class="list-group-item")
                        span Список ненайденных долгов(СНР. объекта аренды):
                        div(id="DebtsMissObjList")
        //4. id="dataStartUpdatePanel"
        div(class="panel panel-default paneHide", id="dataStartUpdatePanel")
            div(class="panel-heading") Обновление данных
            div(class="panel-body")
                div(id="dataStartUpdateOutput")
        //6. id="updateReport"
        div(class="panel panel-default paneHide", id="updateReportPanel")
            div(class="panel-heading")
                div(style="float:left; line-height:32px;") Отчет
                button(class="btn btn-primary", style="float:right; display:block;",  type="button", onclick="getUpdateReportXls()") Выгрузить отчет в xls
                div(class="clear")
            div(class="panel-body")
                ul(class="list-group")
                    li(class="list-group-item list-group-item-info")
                        span Искали каждую рекламную конструкцию (объект слоя РК) в списке долгов (в файле xls)
                    li(class="list-group-item")
                        span Общее кол-во
                        span(class="badge")
                            span(id="updateFsTotalQuantity")
                    li(class="list-group-item")
                        span Найдено
                        span(class="badge")
                            span(id="updateFsFoundsQuantity")
                    li(class="list-group-item")
                        span Обновилось
                        span(class="badge")
                            span(id="updateFsUpdated")
                    li(class="list-group-item")
                        span Нашлось, но не обновилось
                        span(class="badge")
                            span(id="updateFsFoundsWithError")
                    li(class="list-group-item")
                        span Не найдено
                        span(class="badge")
                            span(id="updateFsMissQuantity")
                    li(class="list-group-item")
                        span Список ненайденных рекламных конструкций (СНР. объекта аренды):
                        div(id="updateFsMissObjList")
                ul(class="list-group")
                    li(class="list-group-item list-group-item-info")
                        span Искали каждый долг (из файла xls) в списке рекламных конструкций (в слое РК)
                    li(class="list-group-item")
                        span Общее кол-во долгов
                        span(class="badge")
                            span(id="updateDebtsTotalQuantity")
                    li(class="list-group-item")
                        span Найдено
                        span(class="badge")
                            span(id="updateDebtsUpdateQuantity")
                    li(class="list-group-item")
                        span Не найдено
                        span(class="badge")
                            span(id="updateDebtsMissQuantity")
                    li(class="list-group-item")
                        span Список ненайденных долгов (СНР. объекта аренды):
                        div(id="updateDebtsMissObjList")